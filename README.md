### Оглавление
- [Инструкция по развёртыванию](#инструкция-по-развёртыванию-на-локальной-машине)
- [Ручки приложения](#ручки-приложения)
  - [Управление товарами](#управление-товарами)
    - [Создать товар](#создать-товар)
    - [Получить все товары](#получить-все-товары)
    - [Получить товары по фильтру](#получить-товары-по-фильтру)
    - [Получить товар по ID](#получить-товар-по-id)
    - [Обновить данные о товаре](#обновить-данные-о-товаре)
    - [Удаление товара](#удаление-товара)
  - [Управление поставками](#управление-поставками)
    - [Создать поставку](#создать-поставку)
    - [Получить все поставки](#получить-все-поставки)
    - [Получить поставку по ID](#получить-поставку-по-id)
    - [Обновить данные о поставке](#обновить-данные-о-поставке)
    - [Удаление поставки](#удаление-поставки)
  - [Управление продажами](#управление-продажами)
    - [Создать поставку](#создать-поставку)
    - [Получить все продажи](#получить-все-продажи)
    - [Получить продажу по ID](#получить-продажу-по-id)
    - [Обновить данные о продаже](#обновить-данные-о-продаже)
    - [Удаление продажи](#удаление-продажи)

### Инструкция по развёртыванию на локальной машине

1. Склонировать проект куда-нибудь себе на ПК
2. Установить докер
3. Запустить в терминале команду: `docker-compose up --build`

### Ручки приложения

#### Управление товарами

###### Создать товар
Обязательные параметры: title, quantity. Если их не указать - будет ошибка.
```
curl --location 'http://localhost:8181/products' \
--header 'Content-Type: application/json' \
--data '{
    "title": "apple Gold",
    "description": "big",
    "price": 55,
    "quantity": 200
}'
```

###### Получить все товары

```
curl --location 'http://localhost:8181/products'
```

###### Получить товары по фильтру

Фильтрация и сортировка могут работать вместе.

Параметры запроса:
- Параметр `sort` нужен для того чтобы устанавливать по какому полю требуется сортировать. Возможные значения: title, price. По хорошему, нужно было реализовать через Enum и добавить туда возможность сортировки не только asc, но и desc.
- Параметр `title` будет отфильтровано по названию, либо по части названия.
- Параметр `minPrice` выведутся все товары с ценой выше, чем minPrice.
- Параметр `maxPrice` выведутся все товары с ценой ниже, чем maxPrice.
- Параметр `minPrice&maxPrice`выведутся все товары, цена которых будет в диапазоне между minPrice и maxPrice.

```
curl --location 'http://localhost:8181/products/filter?sort=price&title=a&minPrice=5&maxPrice=100'
```

###### Получить товар по ID

```
curl --location 'http://localhost:8181/products?id=a16c014a-0cf6-45a0-886b-ecf9b69db028'
```

###### Обновить данные о товаре
Если не указать какой-то параметр, то в бд данный параметр не поменяется при обновлении.
```
curl --location --request PATCH 'http://localhost:8181/products' \
--header 'Content-Type: application/json' \
--data '{
    "id": "2cdfe53a-6412-49b0-822b-f3d64bf745a3",
    "title": "apple Gold",
    "description": "gold",
    "price": 55,
    "quantity": 200
}'
```

###### Удаление товара

Товар с заданным идентификатором будет удалён из БД.

```
curl --location --request DELETE 'http://localhost:8181/products?id=80fdfbf3-7391-44b5-9092-e7791cfb3dc6'
```

#### Управление поставками

###### Создать поставку
Обязательные параметры: documentTitle, productId, quantity. Если их не указать - будет ошибка.
При сохранении поставки в бд, у product увеличивается количество доступного товара в соответствии с тем, сколько этого товара было поставлено.

#### Я сделала сохранение товаров, как было указано в бизнес требованиях: по заданию было понятно, что необходимо реализовать отношение один ко многим.
#### Однако, я с этим не согласна. В поставке может быть много разных товаров. Поэтому, следовало бы создать отношение многие ко многим.

```
curl --location 'http://localhost:8181/receipts' \
--header 'Content-Type: application/json' \
--data '{
    "documentTitle":"receipts apple",
    "productId": "a16c014a-0cf6-45a0-886b-ecf9b69db028",
    "quantity": 300
}'
```

###### Получить все поставки

```
curl --location 'http://localhost:8181/receipts'
```

###### Получить поставку по ID

```
curl --location 'http://localhost:8181/receipts?id=6f3879c1-572d-4dc6-b0f9-808a8e92f242'
```

###### Обновить данные о поставке
Если не указать какой-то параметр, то в бд данный параметр не поменяется при обновлении.
При обновлении данных о поставке, обновляются данные о количестве доступного товара в product.
```
curl --location --request PATCH 'http://localhost:8181/receipts' \
--header 'Content-Type: application/json' \
--data ' {
    "id": "6f3879c1-572d-4dc6-b0f9-808a8e92f242",
    "documentTitle": "receipts test update number 500 08.05.2024",
    "productId": "54d91bb2-1e30-407c-a380-24f8090ddfe1",
 }'
```

###### Удаление поставки

Поставка с заданным идентификатором будет удалена из БД.

```
curl --location --request DELETE 'http://localhost:8181/receipts?id=52d0889a-a3e7-466b-8f42-c3cbee6b7c9f'
```

#### Управление продажами

###### Создать продажу
Обязательные параметры: documentTitle, productId, quantity. Если их не указать - будет ошибка.
При сохранении продажи в бд, у product уменьшается количество доступного товара в соответствии с тем, сколько этого товара было продано.

#### Аналогичная ситуация с продажами. В одной продаже может быть много разных товаров. По правильному, нужно было реализовать отношение многие ко многим.
```
curl --location 'http://localhost:8181/sales' \
--header 'Content-Type: application/json' \
--data '{
    "documentTitle":"sale2 apple gold",
    "productId": "54d91bb2-1e30-407c-a380-24f8090ddfe1",
    "quantity": 53
}'
```

###### Получить все продажи

```
curl --location 'http://localhost:8181/sales'
```

###### Получить продажу по ID

```
curl --location 'http://localhost:8181/sales?id=d97ede92-2d6a-4462-8db1-5f64f86ef49d'
```

###### Обновить данные о продаже
Если не указать какой-то параметр, то в бд данный параметр не поменяется при обновлении.
При обновлении данных о продаже, обновляются данные о количестве доступного товара в product.
```
curl --location --request PATCH 'http://localhost:8181/sales' \
--header 'Content-Type: application/json' \
--data ' {
    "id": "b503f764-8d21-4487-bb57-9e55e408932d",
    "documentTitle": "sale test update 08.05.2024",
    "productId": "54d91bb2-1e30-407c-a380-24f8090ddfe1",
    "quantity": 7
 }'
```

###### Удаление продажи

Продажа с заданным идентификатором будет удалена из БД.

```
curl --location --request DELETE 'http://localhost:8181/sales?id=2cdfe53a-6412-49b0-822b-f3d64bf745a3'
```
